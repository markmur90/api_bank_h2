{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
  <h2>GPT4 Detalle de la Transferencia</h2>

  {% if mensaje_error %}
  <div class="alert alert-danger mt-3">
    <strong>Error:</strong> {{ mensaje_error }}
  </div>
  {% endif %}

  <div class="card my-4">
    <div class="card-header">Datos generales</div>
    <div class="card-body">
      <p><strong>Payment ID:</strong> {{ transfer.payment_id }}</p>
      <p><strong>Estado:</strong> {{ transfer.status }}</p>
    </div>
  </div>

  {% if archivos.pain001 %}
  <a href="{{ archivos.pain001 }}" class="btn btn-outline-primary">Ver pain.001</a>
  {% endif %}
  {% if archivos.aml %}
  <a href="{{ archivos.aml }}" class="btn btn-outline-primary">Ver AML</a>
  {% endif %}
  {% if archivos.pain002 %}
  <a href="{{ archivos.pain002 }}" class="btn btn-outline-primary">Ver pain.002</a>
  {% endif %}

  <h4 class="mt-4">Log de Transferencia</h4>
  {% for nombre, contenido in log_files_content.items %}
  <div class="card mt-3">
    <div class="card-header">{{ nombre }}</div>
    <div class="card-body">
      <pre class="text-small">{{ contenido }}</pre>
    </div>
  </div>
  {% endfor %}
</div>
<a href="{% url 'dashboard' %}" class="btn btn-secondary me-2">
  <i class="bi bi-house-door"></i> Dashboard
</a>
{% endblock %}
