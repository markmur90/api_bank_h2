{% extends 'base.html' %}
{% block title %}Autorización OAuth2{% endblock %}
{% block content %}

<style>
  .iframe-container {
    position: relative;
    width: 100%;
    padding-top: 66.66%; /* Aspect ratio 3:2 */
    border: 2px solid #dee2e6;
    border-radius: 1rem;
    box-shadow: 0 0 8px rgba(0,0,0,0.05);
    overflow: hidden;
  }
  .iframe-container iframe {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    border: none;
  }
</style>

<div class="container-fluid">
  <h1 class="text-center mb-4 display-6 fw-bold">Conectar con Deutsche Bank</h1>

  <div class="card custom-card mb-4">
    <div class="custom-card-header">Pantalla de Autorización Embebida</div>
    <div class="card-body">
      <p class="mb-3">El siguiente panel contiene la página oficial del banco para autenticación. Al finalizar, volverás automáticamente a la aplicación.</p>
      
      <div class="iframe-container mb-4">
        <iframe src="{{ auth_url }}" id="oauthIframe"></iframe>
      </div>

      <div class="d-flex justify-content-end">
        <a href="{% url 'transfer_detailGPT4' payment_id %}" class="btn btn-outline-primary">
          <i class="bi bi-arrow-left"></i> Volver al detalle
        </a>
      </div>
    </div>
  </div>
</div>

{% endblock %}
