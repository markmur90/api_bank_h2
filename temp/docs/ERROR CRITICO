Paso 4: Notificaciones en Caso de Errores Cr√≠ticos

üìå A√±adimos env√≠o de alertas a Slack cuando ocurre un error cr√≠tico.

import requests

SLACK_WEBHOOK_URL = "https://hooks.slack.com/services/TU_CODIGO/WEBHOOK"

def notify_slack(error_message):
    payload = {"text": f"‚ö†Ô∏è *Error Cr√≠tico en API:* {error_message}"}
    requests.post(SLACK_WEBHOOK_URL, json=payload)

üìå Llamamos notify_slack en errores cr√≠ticos.

except Exception as e:
    logger.critical(f"Error cr√≠tico en la transferencia: {str(e)}", exc_info=True)
    notify_slack(str(e))
    raise APIException("Error inesperado en la transferencia bancaria.")

